var m;(function(n){n[n.Antimatter=0]="Antimatter",n[n.Tangential=5]="Tangential",n[n.Weak=25]="Weak",n[n.Normal=50]="Normal",n[n.Strong=75]="Strong",n[n.Strongest=100]="Strongest",n[n.Boost=1e3]="Boost"})(m||(m={}));function S(i){return(i==null?void 0:i.intents)?Object.keys(i==null?void 0:i.intents).reduce((t,e)=>{let r=i.intents[e];return(r==null?void 0:r.noBeh)||(t[e]=r),t},{}):{}}function E(i){return(i==null?void 0:i.intents)?Object.keys(i==null?void 0:i.intents).reduce((t,e)=>{let r=i.intents[e];return(r==null?void 0:r.noPn)||(t[e]=r),t},{}):{}}import x from"p-throttle";import h from"p-retry";function g({throttle:i={interval:1e3,limit:10},retry:t={retries:1,factor:1.66}}){let e=i?x(i):null;return function(a){let o=async()=>await a();if(e&&(o=e(o)),t){let s=o;o=()=>h(s,t)}return o()}}var l=class extends Error{constructor(t,e,r,a,o){super(`${t}
 ${a}${o?" "+o:""} (${e} ${r})`);this.errorMessage=t;this.fetchMethod=e;this.fetchUri=r;this.statusCode=a;this.statusText=o;Object.setPrototypeOf(this,l.prototype)}};var u=class{constructor(t){var e,r,a,o,s,n;if(!t.apiKey&&!t.bearerToken)throw new Error("You must provide an API key or a bearer token");this.options={...t,fetch:(e=t.fetch)!=null?e:fetch,apiHost:(r=t.apiHost)!=null?r:"https://uniform.app",apiKey:(a=t.apiKey)!=null?a:null,projectId:(o=t.projectId)!=null?o:null,bearerToken:(s=t.bearerToken)!=null?s:null,limitPolicy:(n=t.limitPolicy)!=null?n:g({})}}async apiClient(t,e){return this.options.limitPolicy(async()=>{var o;let r=this.options.apiKey?{"x-api-key":this.options.apiKey}:{Authorization:`Bearer ${this.options.bearerToken}`},a=await fetch(t.toString(),{...e,headers:{...e==null?void 0:e.headers,...r}});if(!a.ok){let s="";try{let n=await a.text();try{let c=JSON.parse(n);c.errorMessage?s=Array.isArray(c.errorMessage)?c.errorMessage.join(", "):c.errorMessage:s=n}catch(c){s=n}}catch(n){s="General error"}throw new l(s,(o=e==null?void 0:e.method)!=null?o:"GET",t.toString(),a.status)}return(e==null?void 0:e.expectNoContent)?null:await a.json()})}createUrl(t,e){let r=new URL(`${this.options.apiHost}${t}`);return Object.entries(e!=null?e:{}).forEach(([a,o])=>{var s;typeof o!==void 0&&o!==null&&r.searchParams.append(a,(s=o==null?void 0:o.toString())!=null?s:"")}),r}};var d=class extends u{constructor(t){super(t)}async getEnrichments(t){let{projectId:e}=this.options,r=this.createUrl("/api/v1/enrichments",{...t,projectId:e});return await this.apiClient(r)}async upsertEnrichmentCategory(t){let e=this.createUrl("/api/v1/enrichments");await this.apiClient(e,{method:"PUT",body:JSON.stringify({...t,projectId:this.options.projectId}),expectNoContent:!0})}async removeEnrichmentCategory(t){let e=this.createUrl("/api/v1/enrichments");await this.apiClient(e,{method:"DELETE",body:JSON.stringify({...t,projectId:this.options.projectId}),expectNoContent:!0})}async upsertEnrichmentValue(t){let e=this.createUrl("/api/v1/enrichment-values");await this.apiClient(e,{method:"PUT",body:JSON.stringify({...t,projectId:this.options.projectId}),expectNoContent:!0})}async removeEnrichmentValue(t){let e=this.createUrl("/api/v1/enrichment-values");await this.apiClient(e,{method:"DELETE",body:JSON.stringify({...t,projectId:this.options.projectId}),expectNoContent:!0})}};var p;(function(n){n.Cookie="CK",n.Event="EVT",n.Behavior="BEH",n.LandingPage="LP",n.PageViewCount="PVW",n.PageVisited="PVI",n.QueryString="QS"})(p||(p={}));var f;(function(r){r.OncePerVisit="visit",r.Once="once",r.Always="always"})(f||(f={}));var y;(function(e){e.Visit="visit",e.Visitor="visitor"})(y||(y={}));function B(i){return i.type==p.Cookie}function Q(i){return i.type==p.Event}function G(i){return i.type==p.Behavior}function Y(i){return i.type==p.LandingPage}function F(i){return i.type==p.PageViewCount}function ie(i){return i.type==p.PageVisited}function se(i){return i.type==p.QueryString}function pe(i,t){var a,o,s,n;let e=i,r=t==null?void 0:t.expr;switch(((a=t==null?void 0:t.cs)!=null?a:!1)||([e,r]=P(e,r)),(o=t==null?void 0:t.type)!=null?o:"exact"){case"exact":return e===r;case"notexact":return e!==r;case"contains":return r&&(s=e==null?void 0:e.includes(r))!=null?s:!1;case"notcontains":return r?!((n=e==null?void 0:e.includes(r))!=null?n:!0):!0;case"exists":return i!==null&&typeof i!="undefined";case"notexists":return i===null||typeof i=="undefined";default:return console.warn(`Unknown string match type ${t.type} will be ignored.`),!1}}function P(...i){return i.map(t=>t==null?void 0:t.toUpperCase())}export{d as EnrichmentClient,m as IntentTagStrength,y as Scope,f as SignalFrequency,p as SignalType,S as getBehaviorIntents,E as getPersonalizationIntents,G as isBehaviorSignal,B as isCookieSignal,Q as isEventSignal,Y as isLandingPageSignal,F as isPageViewCountSignal,ie as isPageVisitedSignal,se as isQueryStringSignal,pe as isStringMatch};
